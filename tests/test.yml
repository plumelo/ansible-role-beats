---

- hosts: all
  become: true
  roles:
    - role: plumelo.beats
      filebeat_config:
        filebeat.inputs:
          - type: log
            enabled: false
            paths:
              - /var/log/*.log
        filebeat.config.modules:
          path: /etc/filebeat/modules.d/*.yml
          reload.enabled: false
          reload.period: 10s
        output.elasticsearch:
          hosts: ["localhost:9200"]
          protocol: "http"
          username: "elastic"
          password: "changeme"
        filebeat.modules:
          - module: nginx
          - module: mysql
          - module: system
            syslog:
              enabled: true
